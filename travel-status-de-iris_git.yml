---
steps:
- desc: 'Update apt package cache'
  cmd: 'apt-get update'
- desc: 'Install locales'
  cmd: 'apt-get install -y locales'
- desc: 'Define locale'
  cmd: 'localedef -i en_US -c -f UTF-8 -A /usr/share/locale/locale.alias en_US.UTF-8'
- desc: 'Set language environment variable'
  cmd: 'export LANG=en_US.utf8'
- desc: 'Non-interactive apt'
  cmd: 'export DEBIAN_FRONTEND=noninteractive'
- desc: 'Install needed modules'
  cmd: 'apt install -y libmodule-build-perl git libjson-perl libcache-perl libdatetime-perl libdatetime-format-strptime-perl libwww-perl libclass-accessor-perl liblist-compare-perl libxml-libxml-perl libgeo-distance-perl liblist-utilsby-perl libtext-levenshteinxs-perl libtest-compile-perl libtest-fatal-perl libtest-pod-perl libtext-csv-perl libtest-number-delta-perl'
- desc: 'Clone repository'
  cmd: 'git clone https://github.com/derf/Travel-Status-DE-IRIS.git'
- desc: 'Change directory'
  cmd: 'cd Travel-Status-DE-IRIS/'
- desc: 'Set locale for Perl'
  cmd: 'export LC_CTYPE="en_US.UTF-8"'
- desc: 'Create Build script'
  cmd: 'perl Build.PL'
- desc: 'Install dependencies'
  cmd: 'yes | ./Build installdeps'
- desc: 'Build program'
  cmd: './Build'
- desc: 'Build manifest'
  cmd: './Build manifest'
- desc: 'Test program'
  cmd: './Build test'
- desc: 'Install program'
  cmd: './Build install'
- desc: 'Show version of program'
  cmd: 'db-iris --version'
- desc: 'Call program'
  cmd: 'db-iris -oq,D "Dortmund Hbf" | perl -pe "sleep 1 if $. % 10 == 0"'
